import turtle
import math

class INPUT_STRUCTURE :
    
    inputs = []
    
    def __init__(self, key_name):
        INPUT_STRUCTURE.inputs.append(self) #ever time an input is defined, add it to a list so it can be updated in INPUT()
        self.key = key_name
    
    key = ""
    is_pressed = False
    just_pressed = False
    
    has_been_released = True
    
    ##the just pressed var needs a small window of time since the program actually 
    just_pressed_window_length = 1
    just_pressed_window = 1
    
    def press(self) :
        self.is_pressed = True
        if self.has_been_released == True :
            self.just_pressed = True
        self.has_been_released = False
    
    def release(self) :
        self.is_pressed = False
        self.has_been_released = True
    
    def update(self) :
        if self.just_pressed == True : 
            if self.just_pressed_window > 0 :
                self.just_pressed_window -= 1
            else: 
                self.just_pressed_window = self.just_pressed_window_length
                self.just_pressed = False
        Window.onkeypress(self.press, self.key)
        Window.onkeyrelease(self.release, self.key)

##MESHES

shape_suz_vert = [(0.203125,0.09375,0.742188),(0.351563,0.515625,0.617188),(0.351563,-0.023438,0.617188),(0.546875,0.054688,0.578125),(0.15625,0.054688,0.648438),(0.625,0.242188,0.5625),(0.546875,0.4375,0.578125),(0.15625,0.4375,0.648438),(0.078125,0.242188,0.65625),(-0.546875,0.054688,0.578125),(-0.625,0.242188,0.5625),(-0.546875,0.4375,0.578125),(-0.203125,0.09375,0.742188),(-0.351563,0.515625,0.617188),(-0.351563,-0.023438,0.617188),(-0.15625,0.4375,0.648438),(-0.15625,0.054688,0.648438),(-0.078125,0.242188,0.65625),(0.195313,0.296875,0.757813),(0.53125,0.335938,0.679688),(0.3125,0.640625,0.835938),(0.234375,0.359375,0.757813),(0.28125,0.398438,0.765625),(0.335938,0.40625,0.75),(0.414063,0.390625,0.75),(-0.859375,0.382813,-0.382813),(0.960938,0.171875,-0.351563),(0.554688,0.28125,0.671875),(0.546875,0.210938,0.671875),(0.460938,0.117188,0.703125),(0.375,0.085938,0.726563),(0.0,-0.1875,0.796875),(0.0,-0.140625,0.742188),(0.0,-0.195313,0.75),(0.203125,0.09375,0.742188),(0.242188,0.125,0.757813),(0.203125,0.171875,0.75),(0.195313,0.226563,0.75),(-0.375,0.085938,0.726563),(-0.460938,0.117188,0.703125),(-0.546875,0.210938,0.671875),(-0.203125,0.09375,0.742188),(-0.242188,0.125,0.757813),(-0.203125,0.171875,0.75),(-0.195313,0.226563,0.75),(-0.195313,0.296875,0.757813),(-0.554688,0.28125,0.671875),(-0.53125,0.335938,0.679688),(-0.414063,0.390625,0.75),(-0.25,0.46875,0.757813),(-0.234375,0.359375,0.757813),(-0.335938,0.40625,0.75),(-0.28125,0.398438,0.765625),(0.351563,0.242188,0.828125),(-0.351563,0.242188,0.828125),(-0.109375,-0.71875,0.734375),(0.140625,-0.757813,0.367188),(-0.25,-0.5,0.390625),(0.0625,-0.882813,0.695313),(0.25,-0.703125,0.6875),(0.21875,-0.28125,0.429688),(0.726563,0.203125,0.601563),(0.726563,0.0,-0.070313),(0.710938,0.484375,0.625),(0.484375,0.554688,0.554688),(0.0,0.429688,0.742188),(-0.460938,0.523438,0.429688),(0.453125,0.867188,-0.382813),(-0.640625,0.679688,-0.445313),(-0.484375,0.023438,-0.546875),(0.429688,-0.195313,-0.210938),(1.039063,-0.101563,-0.328125),(0.859375,0.382813,-0.382813),(0.8125,-0.015625,-0.273438),(1.1875,0.09375,-0.445313),(1.015625,0.414063,-0.289063),(-0.59375,-0.125,-0.164063),(-0.601563,0.0,0.414063),(-0.4375,-0.09375,0.46875),(-0.710938,0.484375,0.625),(-0.617188,0.054688,0.625),(-0.84375,0.015625,-0.273438),(-1.039063,-0.101563,-0.328125),(-1.257813,0.242188,-0.492188),(0.351563,0.117188,0.804688),(-0.351563,0.03125,0.71875),(-0.234375,-0.914063,0.632813),(0.234375,-0.914063,0.632813),(0.0,-0.976563,0.460938),(-0.140625,-0.757813,0.367188),(0.0,-0.460938,0.1875),(-0.25,-0.703125,0.6875),(0.3125,-0.4375,0.570313),(-0.117188,-0.835938,0.710938),(0.09375,-0.75,0.664063),(0.078125,-0.445313,0.75),(-0.234375,-0.25,0.554688),(0.164063,-0.242188,0.710938),(-0.09375,-0.273438,0.78125),(0.398438,-0.046875,0.671875),(-0.398438,-0.046875,0.671875),(0.4375,-0.09375,0.46875),(0.0,-0.382813,-0.351563),(-0.796875,0.40625,0.460938),(-0.6875,0.414063,0.726563),(-0.726563,0.0,-0.070313),(-0.320313,0.757813,0.734375),(-0.640625,0.703125,0.054688),(0.0,0.570313,0.570313),(-0.453125,0.867188,-0.382813),(0.0,0.898438,0.289063),(-0.796875,0.203125,-0.210938),(0.195313,0.664063,0.617188),(-0.828125,-0.070313,-0.132813),(-0.835938,0.171875,-0.273438),(-0.953125,0.289063,-0.34375),(-0.820313,0.328125,-0.203125),(-0.789063,-0.125,-0.328125),(-1.015625,0.414063,-0.289063),(0.0,0.070313,-0.828125),(-1.210938,0.085938,-0.484375),(-1.3125,0.054688,-0.53125),(-1.023438,0.34375,-0.359375),(0.0,0.898438,-0.546875),(0.617188,0.328125,-0.585938),(0.453125,0.929688,-0.070313),(0.640625,0.75,-0.195313),(1.210938,0.078125,-0.40625),(0.820313,0.328125,-0.203125),(0.828125,-0.070313,-0.132813),(0.828125,0.078125,-0.320313),(1.085938,0.273438,-0.390625),(1.171875,0.359375,-0.4375),(0.320313,0.757813,0.734375),(0.742188,0.375,0.65625),(0.601563,0.375,0.664063),(0.25,0.46875,0.757813),(0.625,0.1875,0.648438),(0.375,0.015625,0.703125),(0.125,-0.101563,0.8125),(0.0,0.046875,0.726563),(-0.125,-0.101563,0.8125),(-0.625,0.1875,0.648438),(-0.3125,0.640625,0.835938),(0.46875,0.242188,0.757813),(0.5,0.390625,0.6875),(0.351563,0.359375,0.78125),(0.226563,0.242188,0.820313),(-0.5,0.390625,0.6875),(-0.4375,0.164063,0.765625),(-0.4375,0.328125,0.765625),(-0.351563,0.132813,0.78125),(-0.351563,0.359375,0.78125),(-0.242188,0.242188,0.796875),(0.179688,-0.96875,0.554688),(0.164063,-0.945313,0.4375),(0.367188,-0.890625,0.53125),(0.351563,-0.695313,0.570313),(0.125,-0.539063,0.359375),(0.210938,-0.390625,0.164063),(0.40625,-0.171875,0.148438),(0.257813,-0.3125,0.554688),(0.203125,-0.1875,0.5625),(0.617188,0.054688,0.625),(0.828125,0.148438,0.445313),(0.796875,0.40625,0.460938),(0.859375,0.429688,0.59375),(0.640625,0.296875,0.648438),(0.429688,0.4375,0.71875),(0.335938,0.429688,0.757813),(0.4375,0.546875,0.796875),(0.125,0.304688,0.765625),(0.0,0.210938,0.765625),(0.0625,0.492188,0.75),(0.109375,0.460938,0.609375),(0.460938,0.523438,0.429688),(0.726563,0.40625,0.335938),(0.859375,0.320313,-0.046875),(0.0,0.984375,-0.078125),(-0.453125,0.851563,0.234375),(-0.460938,0.4375,-0.703125),(0.335938,0.054688,-0.664063),(0.0,0.5625,-0.851563),(-0.617188,0.328125,-0.585938),(-0.335938,0.054688,-0.664063),(0.0,-0.195313,-0.671875),(0.484375,0.023438,-0.546875),(-0.796875,0.539063,-0.359375),(-0.210938,-0.390625,0.164063),(-0.640625,-0.007813,-0.429688),(-0.773438,0.265625,-0.4375),(-1.023438,0.4375,-0.484375),(-1.1875,0.4375,-0.390625),(-1.210938,0.078125,-0.40625),(-1.03125,-0.039063,-0.304688),(-1.039063,0.0,-0.367188),(-1.234375,0.25,-0.445313),(-1.109375,0.210938,-0.390625),(-1.046875,0.0,-0.421875),(-1.054688,0.1875,-0.382813),(-0.9375,0.0625,-0.335938),(-0.921875,0.359375,-0.21875),(-0.890625,0.234375,-0.320313),(-0.84375,0.171875,-0.320313),(-0.859375,0.320313,-0.046875),(-0.757813,0.09375,-0.273438),(-0.71875,-0.023438,-0.171875),(-0.734375,-0.046875,0.070313),(-0.40625,-0.171875,0.148438),(-0.210938,-0.226563,0.46875),(-0.164063,-0.945313,0.4375),(-0.328125,-0.945313,0.523438),(-0.367188,-0.890625,0.53125),(-0.351563,-0.695313,0.570313),(-0.3125,-0.4375,0.570313),(-0.078125,-0.445313,0.75),(-0.0625,-0.882813,0.695313),(0.0,-0.679688,0.734375),(-0.09375,-0.75,0.664063),(0.117188,-0.835938,0.710938),(0.0,-0.773438,0.71875),(0.109375,-0.71875,0.734375),(0.0,-0.320313,0.78125),(0.085938,-0.289063,0.742188),(0.132813,-0.226563,0.796875),(0.0,-0.203125,0.828125),(-0.164063,-0.242188,0.710938),(-0.203125,-0.1875,0.5625),(-0.4375,-0.140625,0.53125),(-0.101563,-0.148438,0.742188),(-0.375,0.015625,0.703125),(-0.492188,0.0625,0.671875),(-0.726563,0.203125,0.601563),(-0.601563,0.375,0.664063),(-0.429688,0.4375,0.71875),(-0.859375,0.429688,0.59375),(-0.335938,0.6875,0.59375),(-0.0625,0.492188,0.75),(-0.109375,0.460938,0.609375),(-0.101563,0.429688,0.84375),(-0.125,0.304688,0.765625),(-0.164063,0.414063,0.773438),(0.640625,0.679688,-0.445313),(0.796875,0.539063,-0.359375),(0.773438,0.265625,-0.4375),(0.789063,-0.125,-0.328125),(0.84375,0.289063,-0.210938),(1.023438,0.4375,-0.484375),(1.03125,-0.039063,-0.304688),(1.039063,0.0,-0.367188),(1.1875,0.4375,-0.390625),(1.023438,0.34375,-0.359375),(0.945313,0.304688,-0.289063),(0.953125,0.289063,-0.34375),(1.257813,0.242188,-0.492188),(1.210938,0.085938,-0.484375),(1.046875,0.0,-0.421875),(1.054688,0.1875,-0.382813),(0.890625,0.109375,-0.328125),(0.882813,-0.015625,-0.265625),(0.84375,0.015625,-0.273438),(0.71875,0.039063,-0.1875),(0.5625,0.242188,0.671875),(0.5,0.09375,0.6875),(0.351563,0.03125,0.71875),(0.4375,0.164063,0.765625),(0.351563,0.453125,0.71875),(0.4375,0.328125,0.765625),(0.476563,0.242188,0.773438),(0.203125,0.390625,0.742188),(0.445313,0.335938,0.78125),(0.140625,0.242188,0.742188),(0.273438,0.328125,0.796875),(0.242188,0.242188,0.796875),(0.351563,0.375,0.804688),(0.265625,0.335938,0.820313),(0.265625,0.15625,0.820313),(0.273438,0.164063,0.796875),(0.445313,0.15625,0.78125),(0.351563,0.132813,0.78125),(-0.5,0.09375,0.6875),(-0.5625,0.242188,0.671875),(-0.46875,0.242188,0.757813),(-0.351563,0.453125,0.71875),(-0.476563,0.242188,0.773438),(-0.203125,0.390625,0.742188),(-0.445313,0.335938,0.78125),(-0.445313,0.15625,0.78125),(-0.140625,0.242188,0.742188),(-0.351563,0.375,0.804688),(-0.273438,0.328125,0.796875),(-0.265625,0.335938,0.820313),(-0.226563,0.242188,0.820313),(-0.265625,0.15625,0.820313),(-0.351563,0.117188,0.804688),(-0.273438,0.164063,0.796875),(0.164063,-0.929688,0.632813),(0.0,-0.984375,0.578125),(0.0,-0.945313,0.640625),(-0.179688,-0.96875,0.554688),(-0.164063,-0.929688,0.632813),(0.0,-0.804688,0.34375),(0.328125,-0.945313,0.523438),(0.328125,-0.914063,0.398438),(0.289063,-0.710938,0.382813),(0.0,-0.570313,0.320313),(0.265625,-0.820313,0.664063),(0.25,-0.5,0.390625),(0.210938,-0.445313,0.710938),(0.179688,-0.414063,0.257813),(0.234375,-0.351563,0.40625),(0.0,-0.484375,0.28125),(0.117188,-0.6875,0.734375),(0.179688,-0.3125,0.710938),(0.234375,-0.25,0.554688),(0.0,-0.445313,0.75),(0.0,-0.328125,0.742188),(0.210938,-0.226563,0.46875),(-0.085938,-0.289063,0.742188),(0.203125,-0.171875,0.5),(0.4375,-0.140625,0.53125),(0.632813,-0.039063,0.539063),(-0.179688,-0.414063,0.257813),(0.296875,-0.3125,-0.265625),(0.34375,-0.148438,-0.539063),(-0.125,-0.539063,0.359375),(-0.289063,-0.710938,0.382813),(-0.328125,-0.914063,0.398438),(-0.265625,-0.820313,0.664063),(-0.234375,-0.351563,0.40625),(-0.21875,-0.28125,0.429688),(-0.257813,-0.3125,0.554688),(-0.210938,-0.445313,0.710938),(-0.117188,-0.6875,0.734375),(-0.179688,-0.3125,0.710938),(-0.203125,-0.171875,0.5),(-0.632813,-0.039063,0.539063),(-0.296875,-0.3125,-0.265625),(-0.828125,0.148438,0.445313),(-0.773438,0.164063,0.375),(-0.851563,0.234375,0.054688),(-0.726563,0.40625,0.335938),(-0.679688,0.453125,0.492188),(-0.796875,0.5625,0.125),(-0.632813,0.453125,0.28125),(-0.796875,0.617188,-0.117188),(-0.640625,0.75,-0.195313),(-0.453125,0.929688,-0.070313),(0.460938,0.4375,-0.703125),(-0.34375,-0.148438,-0.539063),(-0.429688,-0.195313,-0.210938),(0.640625,-0.007813,-0.429688),(0.59375,-0.125,-0.164063),(0.640625,0.703125,0.054688),(0.796875,0.617188,-0.117188),(0.453125,0.851563,0.234375),(0.632813,0.453125,0.28125),(0.796875,0.5625,0.125),(0.679688,0.453125,0.492188),(0.851563,0.234375,0.054688),(0.773438,0.164063,0.375),(0.734375,-0.046875,0.070313),(0.601563,0.0,0.414063),(0.492188,0.601563,0.6875),(0.0,0.40625,0.601563),(0.335938,0.6875,0.59375),(0.15625,0.71875,0.757813),(0.203125,0.617188,0.851563),(0.101563,0.429688,0.84375),(0.328125,0.476563,0.742188),(0.6875,0.414063,0.726563),(0.585938,0.289063,0.6875),(0.5625,0.351563,0.695313),(0.492188,0.0625,0.671875),(0.578125,0.195313,0.679688),(0.476563,0.101563,0.71875),(0.421875,0.398438,0.773438),(0.273438,0.421875,0.773438),(0.210938,0.375,0.78125),(0.164063,0.414063,0.773438),(0.179688,0.296875,0.78125),(0.171875,0.21875,0.78125),(0.0,0.351563,0.820313),(0.1875,0.15625,0.773438),(0.132813,0.210938,0.757813),(0.164063,0.140625,0.75),(0.226563,0.109375,0.78125),(0.375,0.0625,0.742188),(-0.164063,0.140625,0.75),(-0.132813,0.210938,0.757813),(-0.1875,0.15625,0.773438),(-0.171875,0.21875,0.78125),(-0.179688,0.296875,0.78125),(-0.226563,0.109375,0.78125),(-0.375,0.0625,0.742188),(-0.210938,0.375,0.78125),(-0.476563,0.101563,0.71875),(-0.578125,0.195313,0.679688),(-0.585938,0.289063,0.6875),(-0.640625,0.296875,0.648438),(-0.742188,0.375,0.65625),(-0.5625,0.351563,0.695313),(-0.421875,0.398438,0.773438),(-0.335938,0.429688,0.757813),(-0.273438,0.421875,0.773438),(-0.328125,0.476563,0.742188),(-0.4375,0.546875,0.796875),(-0.492188,0.601563,0.6875),(-0.203125,0.617188,0.851563),(-0.15625,0.71875,0.757813),(-0.195313,0.664063,0.617188),(-0.484375,0.554688,0.554688),(0.0,-0.890625,0.6875),(0.09375,-0.820313,0.710938),(0.046875,-0.867188,0.6875),(-0.046875,-0.867188,0.6875),(0.0,-0.875,0.6875),(0.09375,-0.8125,0.640625),(0.09375,-0.742188,0.726563),(0.046875,-0.851563,0.632813),(0.0,-0.859375,0.632813),(0.0,-0.78125,0.65625),(0.0,-0.765625,0.734375),(-0.09375,-0.742188,0.726563),(-0.046875,-0.851563,0.632813),(-0.09375,-0.8125,0.640625),(-0.09375,-0.820313,0.710938),(0.125,-0.226563,0.75),(0.09375,-0.273438,0.78125),(0.101563,-0.148438,0.742188),(0.109375,-0.132813,0.78125),(0.039063,-0.125,0.78125),(0.09375,-0.15625,0.8125),(0.078125,-0.25,0.804688),(0.109375,-0.226563,0.828125),(0.046875,-0.148438,0.8125),(0.0,-0.289063,0.804688),(-0.078125,-0.25,0.804688),(-0.125,-0.226563,0.75),(-0.132813,-0.226563,0.796875),(-0.109375,-0.132813,0.78125),(-0.039063,-0.125,0.78125),(-0.09375,-0.15625,0.8125),(-0.046875,-0.148438,0.8125),(-0.109375,-0.226563,0.828125),(0.890625,0.40625,-0.234375),(1.023438,0.476563,-0.3125),(0.921875,0.359375,-0.21875),(0.796875,0.203125,-0.210938),(0.890625,0.242188,-0.265625),(0.890625,0.234375,-0.320313),(0.835938,0.171875,-0.273438),(0.757813,0.09375,-0.273438),(0.71875,-0.023438,-0.171875),(0.820313,0.085938,-0.273438),(0.765625,0.09375,-0.320313),(0.84375,0.171875,-0.320313),(0.851563,0.015625,-0.320313),(0.8125,-0.015625,-0.320313),(0.9375,0.0625,-0.335938),(1.0,0.125,-0.367188),(1.015625,0.234375,-0.375),(1.039063,0.328125,-0.414063),(1.109375,0.210938,-0.390625),(1.1875,0.34375,-0.484375),(1.234375,0.25,-0.445313),(1.265625,0.289063,-0.40625),(1.28125,0.054688,-0.429688),(0.882813,-0.023438,-0.210938),(0.773438,-0.140625,-0.125),(1.039063,-0.085938,-0.492188),(1.3125,0.054688,-0.53125),(1.367188,0.296875,-0.5),(1.234375,0.507813,-0.421875),(1.25,0.46875,-0.546875),(1.351563,0.320313,-0.421875),(-0.890625,0.40625,-0.234375),(-0.84375,0.289063,-0.210938),(-0.945313,0.304688,-0.289063),(-1.023438,0.476563,-0.3125),(-1.039063,-0.085938,-0.492188),(-1.234375,0.507813,-0.421875),(-1.25,0.46875,-0.546875),(-1.351563,0.320313,-0.421875),(-1.367188,0.296875,-0.5),(-1.28125,0.054688,-0.429688),(-1.265625,0.289063,-0.40625),(-1.171875,0.359375,-0.4375),(-0.773438,-0.140625,-0.125),(-0.8125,-0.015625,-0.273438),(-0.71875,0.039063,-0.1875),(-0.882813,-0.023438,-0.210938),(-0.882813,-0.015625,-0.265625),(-1.1875,0.09375,-0.445313),(-0.8125,-0.015625,-0.320313),(-0.851563,0.015625,-0.320313),(-1.0,0.125,-0.367188),(-0.960938,0.171875,-0.351563),(-1.1875,0.34375,-0.484375),(-1.085938,0.273438,-0.390625),(-1.039063,0.328125,-0.414063),(-1.015625,0.234375,-0.375),(-0.890625,0.242188,-0.265625),(-0.890625,0.109375,-0.328125),(-0.828125,0.078125,-0.320313),(-0.765625,0.09375,-0.320313),(-0.820313,0.085938,-0.273438)]
shape_suz_order = [(145,263,264),(263,4,264),(263,6,4),(264,4,3),(263,7,6),(263,146,7),(145,146,263),(146,2,7),(264,3,265),(265,3,5),(145,264,266),(266,264,265),(146,267,2),(267,8,2),(145,268,146),(268,267,146),(266,269,145),(268,145,269),(267,270,8),(270,9,8),(268,147,267),(147,270,267),(268,269,271),(147,268,271),(270,272,9),(272,5,9),(147,273,270),(274,272,270),(274,270,273),(273,147,275),(147,271,275),(273,275,276),(274,273,276),(54,275,271),(54,276,275),(54,271,269),(274,276,148),(54,148,276),(274,148,277),(54,277,148),(274,277,278),(278,272,274),(54,85,277),(278,277,85),(54,269,279),(85,54,279),(266,279,269),(280,85,279),(280,279,266),(278,85,280),(266,265,280),(278,1,272),(280,1,278),(280,265,1),(272,1,5),(265,5,1),(281,282,283),(10,282,281),(10,11,282),(15,10,281),(282,11,12),(282,12,149),(283,282,149),(149,12,14),(15,281,86),(17,15,86),(281,283,150),(86,281,150),(149,14,284),(284,14,16),(283,149,151),(151,149,284),(285,150,283),(151,285,283),(284,16,286),(286,16,18),(151,284,153),(153,284,286),(151,287,285),(153,287,151),(285,288,150),(286,18,289),(289,18,17),(287,55,285),(285,55,288),(153,290,287),(290,55,287),(153,286,291),(291,290,153),(286,289,154),(286,154,291),(291,292,290),(292,55,290),(154,292,291),(293,55,292),(154,293,292),(294,55,293),(294,293,154),(295,55,294),(55,295,288),(294,154,296),(295,294,296),(289,296,154),(288,295,152),(295,296,152),(288,152,150),(86,150,152),(13,152,296),(13,86,152),(289,13,296),(17,86,13),(289,17,13),(297,155,298),(155,89,298),(297,298,299),(88,155,297),(89,300,298),(155,156,89),(301,298,300),(301,299,298),(89,211,300),(299,301,217),(302,89,156),(302,211,89),(303,156,155),(88,303,155),(302,156,57),(303,304,156),(304,57,156),(157,304,303),(157,303,88),(304,305,57),(157,305,304),(306,302,57),(157,88,307),(158,305,157),(158,157,307),(220,307,88),(220,88,297),(305,159,57),(306,57,159),(158,308,305),(305,308,159),(158,307,60),(93,308,158),(93,158,60),(222,60,307),(220,222,307),(93,60,309),(308,310,159),(93,311,308),(308,311,310),(311,93,162),(162,93,309),(311,162,61),(310,311,61),(312,159,310),(312,306,159),(309,60,313),(222,313,60),(309,313,96),(222,218,313),(96,313,218),(162,309,314),(96,314,309),(315,162,314),(61,162,315),(96,224,314),(96,218,316),(317,96,316),(317,224,96),(317,316,216),(216,316,218),(224,98,314),(315,314,98),(224,317,223),(61,315,318),(317,216,319),(319,223,317),(102,61,318),(315,320,318),(102,318,320),(315,163,320),(163,315,98),(320,163,321),(320,321,102),(163,100,321),(322,102,321),(322,321,100),(163,98,140),(163,140,100),(102,161,61),(61,161,160),(310,61,160),(91,310,160),(91,312,310),(103,91,160),(323,312,91),(103,160,324),(324,160,161),(189,91,103),(323,91,189),(325,103,324),(312,323,326),(312,326,306),(306,326,90),(306,90,302),(302,90,211),(326,327,90),(328,211,90),(328,90,327),(211,328,212),(211,212,300),(328,327,213),(328,213,212),(326,58,327),(58,326,323),(87,300,212),(87,212,213),(87,301,300),(327,214,213),(327,58,214),(87,213,329),(329,213,214),(301,87,94),(94,87,329),(301,94,217),(94,329,56),(329,214,92),(92,56,329),(92,214,215),(58,215,214),(58,330,215),(58,323,330),(323,331,330),(323,189,331),(330,332,215),(330,331,332),(92,215,333),(332,333,215),(334,92,333),(92,334,56),(334,333,216),(56,334,218),(216,218,334),(216,333,335),(332,335,333),(216,335,319),(97,335,332),(331,97,332),(319,335,227),(97,227,335),(331,210,97),(331,79,210),(97,210,336),(210,79,336),(97,336,228),(227,97,228),(336,229,228),(336,79,229),(227,228,142),(101,228,229),(101,142,228),(79,337,229),(337,101,229),(331,209,79),(209,331,189),(79,78,337),(209,78,79),(337,81,101),(338,209,189),(189,103,338),(233,81,337),(78,339,337),(233,337,339),(209,208,78),(78,340,339),(208,340,78),(339,340,104),(209,77,208),(236,233,339),(339,104,236),(208,341,340),(340,342,104),(340,341,342),(106,341,208),(77,106,208),(104,80,236),(342,343,104),(104,343,80),(344,342,341),(342,345,343),(344,345,342),(344,341,205),(106,205,341),(344,108,345),(343,345,67),(346,344,205),(346,108,344),(106,112,205),(345,108,180),(345,180,67),(346,347,108),(108,348,180),(108,347,348),(180,348,179),(347,110,348),(110,179,348),(188,347,346),(347,69,110),(188,69,347),(69,181,110),(184,69,188),(69,184,181),(188,346,117),(346,205,117),(184,188,191),(188,117,191),(190,184,191),(181,124,110),(110,124,179),(181,183,124),(124,183,349),(181,120,183),(349,183,120),(184,185,181),(181,185,120),(184,70,185),(190,70,184),(185,186,120),(350,185,70),(185,350,186),(350,70,351),(351,70,190),(350,103,186),(350,338,103),(350,351,338),(338,351,209),(209,351,77),(351,190,77),(325,186,103),(118,77,190),(118,190,191),(182,186,325),(182,120,186),(349,120,182),(182,325,187),(125,349,182),(125,182,187),(325,71,187),(325,324,71),(324,161,71),(71,352,187),(352,125,187),(161,353,71),(71,353,352),(349,125,243),(349,243,68),(124,349,68),(179,124,68),(68,243,127),(179,68,126),(68,127,126),(127,243,244),(125,244,243),(126,127,354),(125,245,244),(352,245,125),(127,244,355),(354,127,355),(245,352,246),(126,354,356),(356,179,126),(244,245,129),(244,129,355),(356,111,179),(180,179,111),(67,180,111),(176,111,356),(67,111,109),(176,109,111),(67,109,239),(356,357,176),(356,354,357),(357,354,358),(354,355,358),(178,358,355),(178,355,129),(357,358,177),(359,176,357),(359,357,177),(360,177,358),(360,358,178),(359,177,166),(361,177,360),(361,166,177),(360,178,63),(361,360,362),(360,63,362),(361,362,363),(165,166,361),(165,361,363),(363,362,161),(363,161,102),(161,362,353),(322,363,102),(165,363,322),(353,362,63),(322,62,165),(165,167,166),(167,165,62),(64,166,167),(64,359,166),(167,62,135),(64,167,135),(322,164,62),(322,100,164),(64,65,359),(359,65,176),(64,364,65),(175,176,65),(175,109,176),(365,109,175),(109,365,239),(175,65,366),(364,366,65),(66,365,175),(239,365,66),(175,366,113),(134,113,366),(364,134,366),(174,175,113),(66,175,174),(134,367,113),(174,113,367),(364,21,134),(367,134,21),(174,367,368),(367,21,368),(174,368,369),(66,174,369),(137,368,21),(137,369,368),(364,171,21),(171,370,21),(137,21,370),(364,371,171),(364,64,371),(64,135,371),(371,169,171),(171,169,370),(135,136,371),(371,136,169),(135,168,136),(62,168,135),(62,138,168),(164,138,62),(136,168,372),(138,372,168),(169,136,373),(136,372,373),(164,374,138),(100,374,164),(374,375,138),(138,375,372),(100,139,374),(374,376,375),(139,376,374),(372,375,29),(376,29,375),(372,29,28),(376,30,29),(372,28,20),(372,20,373),(376,31,30),(377,373,20),(169,373,377),(377,20,25),(169,377,170),(170,377,25),(170,25,24),(169,170,370),(170,24,23),(370,170,378),(170,23,378),(370,378,137),(379,378,23),(137,378,379),(379,23,22),(379,22,19),(137,379,380),(137,380,369),(379,19,381),(381,19,38),(172,380,379),(172,379,381),(369,380,172),(381,38,382),(172,381,382),(382,38,37),(369,172,383),(382,37,384),(66,369,383),(172,382,385),(385,382,384),(384,37,36),(172,385,173),(172,173,383),(385,384,386),(386,173,385),(384,36,387),(35,386,384),(35,384,387),(388,387,36),(35,387,388),(388,36,31),(376,388,31),(139,388,376),(35,388,139),(35,141,386),(386,141,173),(140,35,139),(140,139,100),(35,140,141),(389,173,141),(141,42,389),(389,390,173),(391,390,389),(42,391,389),(173,390,241),(173,241,383),(33,141,140),(392,241,390),(391,392,390),(44,392,391),(44,45,392),(43,44,391),(45,393,392),(392,393,241),(45,46,393),(43,391,394),(42,394,391),(395,43,394),(395,394,42),(395,39,43),(46,396,393),(241,393,396),(46,51,396),(396,51,53),(397,39,395),(397,40,39),(41,40,397),(397,395,231),(395,42,231),(41,397,398),(142,231,42),(141,142,42),(142,101,231),(142,141,33),(101,232,231),(397,231,232),(398,397,232),(101,81,232),(81,143,232),(398,232,143),(81,233,143),(399,41,398),(399,398,143),(399,47,41),(48,47,399),(233,400,143),(399,143,400),(233,401,400),(236,401,233),(234,399,400),(401,234,400),(80,401,236),(234,402,399),(48,399,402),(401,105,234),(80,105,401),(235,402,234),(105,235,234),(403,48,402),(235,403,402),(403,49,48),(404,49,403),(404,403,235),(404,52,49),(53,52,404),(53,404,405),(396,53,405),(404,235,406),(405,404,406),(396,405,50),(405,406,50),(396,50,242),(241,396,242),(240,241,242),(50,240,242),(240,383,241),(66,383,240),(407,406,235),(105,407,235),(144,50,406),(407,144,406),(408,407,105),(144,407,408),(408,105,80),(144,409,50),(50,409,240),(66,240,238),(238,240,409),(239,66,238),(410,409,144),(238,409,410),(144,408,107),(410,144,107),(411,238,410),(107,411,410),(411,239,238),(107,237,411),(237,239,411),(408,237,107),(237,412,239),(408,412,237),(80,412,408),(67,239,412),(80,343,412),(343,67,412),(59,297,299),(220,297,59),(59,299,413),(299,217,413),(59,414,220),(413,415,59),(59,415,414),(416,413,217),(413,417,415),(416,417,413),(415,418,414),(220,414,419),(220,419,222),(414,418,95),(414,95,419),(415,420,418),(95,418,420),(415,417,421),(415,421,420),(416,421,417),(422,95,420),(422,420,421),(221,419,95),(221,95,422),(423,222,419),(423,419,221),(222,423,218),(56,218,423),(423,424,56),(423,221,424),(424,94,56),(221,422,219),(221,219,424),(425,422,421),(425,219,422),(416,425,421),(426,219,425),(426,425,416),(219,427,424),(219,426,427),(424,427,94),(426,416,427),(427,217,94),(427,416,217),(428,224,429),(224,428,98),(224,223,429),(430,98,428),(430,140,98),(428,429,225),(430,428,225),(33,140,430),(430,225,431),(432,430,431),(432,33,430),(433,431,225),(432,431,433),(225,429,434),(433,225,435),(225,434,435),(435,436,433),(432,433,436),(226,435,434),(435,226,436),(32,432,436),(32,33,432),(32,436,226),(32,34,33),(429,437,434),(226,434,437),(429,223,437),(99,437,223),(319,99,223),(438,226,437),(99,438,437),(99,319,439),(319,227,439),(438,99,440),(99,439,440),(227,230,439),(440,439,230),(227,142,230),(142,33,230),(440,230,441),(442,230,33),(442,441,230),(32,442,33),(443,440,441),(443,441,442),(444,442,32),(443,442,444),(444,32,226),(443,445,440),(445,443,444),(445,444,226),(438,440,445),(438,445,226),(446,447,76),(447,446,73),(447,251,76),(446,76,448),(129,446,448),(129,73,446),(76,253,448),(129,245,73),(129,448,247),(247,448,253),(178,129,247),(245,246,73),(178,247,449),(63,178,449),(247,253,450),(449,247,450),(76,252,253),(252,76,251),(253,451,450),(252,254,253),(253,254,451),(449,450,452),(452,450,451),(449,452,453),(63,449,262),(449,453,262),(63,262,454),(353,63,454),(453,261,262),(262,74,454),(262,261,74),(453,455,261),(452,456,453),(455,453,456),(452,457,456),(452,451,457),(455,456,131),(261,455,131),(131,456,457),(457,451,27),(27,451,254),(131,457,259),(457,27,259),(261,131,458),(458,131,259),(261,458,459),(261,459,74),(260,459,458),(74,459,260),(458,259,460),(460,259,27),(260,458,460),(460,27,461),(257,260,460),(257,460,461),(27,258,461),(258,257,461),(27,462,258),(27,254,462),(258,256,257),(463,462,254),(252,463,254),(258,462,132),(463,132,462),(258,132,464),(464,256,258),(463,465,132),(465,464,132),(133,463,252),(133,465,463),(252,251,133),(465,255,464),(464,255,256),(466,255,465),(466,465,133),(466,256,255),(133,251,467),(133,467,466),(466,75,256),(75,257,256),(466,467,128),(466,128,75),(75,250,257),(128,250,75),(250,260,257),(467,468,128),(250,469,260),(74,260,469),(128,249,250),(249,469,250),(130,74,469),(249,130,469),(130,454,74),(128,72,249),(72,130,249),(128,468,72),(470,454,130),(72,470,130),(470,353,454),(353,470,246),(72,246,470),(353,246,352),(72,471,246),(468,471,72),(471,73,246),(471,248,73),(447,73,248),(468,472,471),(248,471,472),(468,473,472),(474,447,248),(447,474,251),(248,472,475),(475,472,473),(474,248,475),(468,476,473),(476,475,473),(476,474,475),(251,474,476),(467,476,468),(251,476,467),(477,202,119),(202,477,117),(117,477,26),(117,26,191),(202,117,478),(478,117,205),(478,479,202),(479,119,202),(478,205,112),(118,191,26),(477,119,480),(480,26,477),(193,480,119),(481,118,26),(480,192,26),(481,26,192),(482,192,480),(193,482,480),(122,481,192),(482,483,192),(122,192,483),(484,483,482),(193,484,482),(122,483,485),(484,485,483),(486,122,485),(486,485,484),(481,122,486),(481,486,83),(118,481,83),(487,486,484),(193,487,484),(487,194,486),(194,83,486),(488,487,193),(118,83,489),(118,489,77),(489,207,77),(77,207,106),(114,489,83),(489,114,207),(114,83,195),(194,195,83),(490,207,114),(491,106,207),(491,207,490),(106,491,112),(492,114,195),(490,114,492),(196,195,194),(492,195,196),(493,490,492),(196,493,492),(491,490,82),(196,194,494),(493,495,490),(495,82,490),(196,199,493),(494,199,196),(493,496,495),(495,496,82),(197,494,194),(197,194,487),(493,201,496),(201,493,199),(488,197,487),(201,199,497),(197,121,494),(494,121,199),(197,84,121),(200,497,199),(200,199,121),(201,497,498),(200,498,497),(499,84,197),(499,197,488),(198,121,84),(198,84,499),(198,200,121),(198,499,500),(200,198,500),(501,499,488),(499,501,500),(200,500,502),(502,500,501),(200,502,498),(501,488,123),(123,488,193),(123,193,119),(502,501,116),(116,501,123),(498,502,116),(479,123,119),(116,123,479),(498,116,203),(203,116,479),(203,479,503),(478,503,479),(112,503,478),(115,203,503),(112,115,503),(204,498,203),(115,204,203),(204,504,498),(201,498,504),(496,201,504),(496,504,505),(204,505,504),(82,496,505),(506,204,115),(204,506,505),(82,505,507),(507,505,506),(82,507,206),(507,506,206),(506,115,206),(112,206,115),(82,206,491),(112,491,206)]

suzane_mesh = [shape_suz_vert,shape_suz_order]

shape_cube_vert = [(-0.5,0.5,0.5),(0.5,0.5,-0.5),(0.5,0.5,0.5),(-0.5,0.5,-0.5),(-0.5,-0.5,0.5),(0.5,-0.5,-0.5),(0.5,-0.5,0.5),(-0.5,-0.5,-0.5)]
shape_cube_order = [(1,3,5),(3,7,5),(2,4,6),(4,8,6),(3,2,7),(2,6,7),(4,1,8),(1,5,8),(3,1,2),(1,4,2),(5,7,8),(7,6,8)]

cube_mesh = [shape_cube_vert,shape_cube_order]



class Node3D :

    def __init__(self,object_name):
        self.name = object_name
        self.position = [0,0,0]
        self.rotation = [0,0,0]
        self.visible = True
        self.scale = 1
    
    def rotate_x(self,angle) :
        new_x = self.rotation[0]+angle
        new_x = wrapf(angle,0,360)
        self.rotation = [new_x,self.rotation[1],self.rotation[2]]

    def rotate_y(self,angle) :
        new_y = self.rotation[1]+angle
        new_y = wrapf(new_y,0,360)
        self.rotation = [self.rotation[0],new_y,self.rotation[2]]

    def rotate_z(self,angle) :
        new_z = self.rotation[2]+angle
        new_z = wrapf(angle,0,360)
        self.rotation = [self.rotation[0],self.rotation[1],new_z]
    
    def move_x(self,distance) :
        new_x = self.position[0] + distance
        self.position = [new_x,self.position[1],self.position[2]]

    def move_y(self,distance) :
        new_y = self.position[1] + distance
        self.position = [self.position[0],new_y,self.position[2]]

    def move_z(self,distance) :
        new_z = self.position[2] + distance
        self.position = [self.position[0],self.position[1],new_z]

class Mesh3D(Node3D) :

    class_objects = []

    def __init__(self,object_name,mesh : list):
        self.mesh = mesh
        Mesh3D.class_objects.append(self)
        print(Mesh3D.class_objects)
        super().__init__(object_name)

    
class WorldCamera(Node3D) :

    def __init__(self, object_name):
        self.name = object_name
        self.position = [0,0,7]
        self.rotation = [0,0,0]
    

        




empty_mesh = [[],[]]

##define screen
Window = turtle.Screen()
Window.tracer(0)
Window.bgcolor("black")

running = True



cube = Mesh3D("bobby",cube_mesh)

focal = 256

camera = WorldCamera("camera")

def ready() :
    pass
    
def draw() :
    turtle.clear()
    for object in Mesh3D.class_objects :
        
        if object.visible :
            #print(object.name)
            object_mesh = object.mesh
            face_count = 0
            for face in object_mesh[1] :
                face_count += 1 
                if face_count > len(object_mesh[1]) : 
                    print(face_count)
                    break
                tri = [object_mesh[0][face[0]-1],object_mesh[0][face[1]-1],object_mesh[0][face[2]-1]]
                
                position = combine_vec3(object.position,camera.position,True)
                rotation : list = object.rotation

                scale = object.scale

                tri = [transform_scale(tri[0],scale),transform_scale(tri[1],scale),transform_scale(tri[2],scale)]

                tri = [transform_rotation(tri[0],rotation),transform_rotation(tri[1],rotation),transform_rotation(tri[2],rotation)]

                tri = [transform_position(tri[0],position),transform_position(tri[1],position),transform_position(tri[2],position)]

                ##camera rotation has to be applied after the first in order to work correctly
                cam_rot = combine_vec3([0,0,0],camera.rotation,False) ##invert 
                print(cam_rot)
                tri = [transform_rotation(tri[0],cam_rot),transform_rotation(tri[1],cam_rot),transform_rotation(tri[2],cam_rot)]

                on_screen = True

                for point in tri :
                    if point[2] < 0.1 :
                        on_screen = False

                if on_screen :
                    draw_triangle(tri)

                

def draw_triangle(triangle : list) :
    turtle.penup()
    turtle.pencolor("blue")
    turtle.color("blue")
    start_point = screen_plot(triangle[0])
    turtle.setpos(start_point) 
    turtle.pendown()
    turtle.setpos(screen_plot(triangle[1])) 
    turtle.setpos(screen_plot(triangle[2])) 
    turtle.setpos(start_point)

    

def screen_plot(point : list) -> list :
    f = point[2]/focal
    if f > 0 :
        new_point = ((point[0])/f,(point[1])/f)
        return new_point
    else :
        return (0,0)
  
        

def transform_position(point : list ,position : list) -> list :
    
    new_point = (point[0] + position[0],point[1] + position[1],point[2] + position[2])
    
    return new_point

def transform_rotation(point : list, rotation : list) -> list :

    z = rotate_2D_Vec((point[0],point[1]),deg_to_rad(rotation[2]))
    new_point = (z[0],z[1],point[2])

    y = rotate_2D_Vec((new_point[0],new_point[2]),deg_to_rad(rotation[1]))
    new_point = (y[0],new_point[1],y[1])

    x = rotate_2D_Vec((new_point[1],new_point[2]),deg_to_rad(rotation[0]))
    new_point = (new_point[0],x[0],x[1])
    

    return new_point

def transform_scale(point : list,scale) -> list :
    point = [point[0]*scale,point[1]*scale,point[2]*scale]
    return point


def rotate_2D_Vec(vector : list,angle) :

        s = math.sin(angle)
        c = math.cos(angle)

        x = c * vector[0] - s * vector[1]
        y = s * vector[0] + c * vector[1]

        return (x,y)

def rad_to_deg(radian : float) -> float :
    return (radian * 180) / math.pi

def deg_to_rad(degree : float) -> float :
    return (degree * math.pi) / 180

def combine_vec3(l1 : list, l2 : list, subtract : bool = False) -> list :
    
    if subtract :
        for i in range(len(l2)) :
            l2[i] = l2[i] * -1

    

    x = (l1[0] + l2[0])
    y = (l1[1] + l2[1])
    z = (l1[2] + l2[2])
    
    return [x,y,z]
    

def wrapf(value,min,max) -> float :

    if value < min :
        value = max + value

    elif value > max :
        value = value % max
    
    return value

w_key = INPUT_STRUCTURE("w")
s_key = INPUT_STRUCTURE("s")

a_key = INPUT_STRUCTURE("a")
d_key = INPUT_STRUCTURE("d")

key_left = INPUT_STRUCTURE("Left")
key_right = INPUT_STRUCTURE("Right")

def input_check() :

    Window.listen()

    for input_method in INPUT_STRUCTURE.inputs :
        input_method.update()

    if w_key.is_pressed :
        forward_vec = rotate_2D_Vec((-1,0),deg_to_rad(camera.rotation[1]))
        camera.move_z(forward_vec[0] * 0.01)
        camera.move_x(forward_vec[1] * 0.01)
        
    
    if s_key.is_pressed :
        forward_vec = rotate_2D_Vec((1,0),deg_to_rad(camera.rotation[1]))
        camera.move_z(forward_vec[0] * 0.01)
        camera.move_x(forward_vec[1] * 0.01)

    if key_left.is_pressed :
        camera.rotate_y(-0.1)
    
    if key_right.is_pressed :
        camera.rotate_y(0.1)
    


def process() :
    while running :
        input_check()
        draw()
        Window.update()

ready()



process()

